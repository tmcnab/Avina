@model IEnumerable<Avina.Models.SiteRecord>
@(Layout = null)
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Avina - Powered by You</title>
    <link href="~/Content/bootstrap.css" rel="stylesheet" type="text/css" />
    @*<link href="~/Content/bootstrap-responsive.css" rel="stylesheet" type="text/css" />*@
    <style>
        td {
            border-radius:5px;
            padding:3px;
        }
        footer {
            position:absolute;
            bottom:0;
            width:100%;
            height:30px;
            color:#BBB;
            text-align:center;
        }
        
        footer a {
            color:#BBB;
        }
        
        .record-footer {
            font-size:smaller;
            color:#AAA;
        }
        
        .highlighted {
            background-color:Aqua;
        }
    </style>
</head>
<body>
    <div class="container">
        <form method="post" action="/" class="form-inline well">
            <div class="control-group">
                <div class="controls">
                    <div class="input-append">
                        <input class="input-xxlarge" type="search" id="q" name="q" autofocus="true" x-webkit-speech onwebkitspeechchange="document.forms[0].submit();" spellcheck="true" placeholder="Search Avina" /><input tabindex="-1" class="btn" type="submit" value="Search" />
                    </div>
                </div>
            </div>
        </form>
        <table class="T_Results span8">
            <tbody>
                @foreach (var record in Model)
                {
                <tr><td>
                    <h3><a data-type="url" href="@record.url">@record.title</a></h3>
                    <p>@record.textPreview</p>
                    <p class="record-footer">First Submitted @record.submitted.ToShortTimeString() @record.submitted.ToLongDateString() &mdash; @record.hits Hits &mdash; @record.duplicates Submissions</p>
                </td></tr>
                }
                @if (Model.Count() < 1)
                {
                <tr><td>
                    <h3>No Results</h3>
                    <p>The search your were trying to perform was not matched to anything in Avina. We're sorry about that. The buttons below will perform a search for you on another index:</p>
                    <div>
                        <a class="btn" href="https://google.com/search?q=@ViewBag.SearchTerm">Google</a>
                        <a class="btn" href="https://bing.com/search?q=@ViewBag.SearchTerm">Bing</a>
                        <a class="btn" href="https://duckduckgo.com/?q=@ViewBag.SearchTerm">DuckDuckGo</a>
                    </div>
                </td></tr>
                }
            </tbody>
        </table>
    </div>
    <footer>
        Avina is a <a tabindex="-1" href="http://seditious-tech.com/">Seditious Technologies</a> Experiment. Hosted by <a tabindex="-1" href="http://appharbor.com">AppHarbor</a>.
    </footer>
    <script src="~/Scripts/jquery-1.7.1.js" type="text/javascript"></script>
    <script src="~/Scripts/jquery.dataTables.js" type="text/javascript"></script>
    <script src="~/Scripts/bootstrap.js" type="text/javascript"></script>
    <script src="~/Scripts/bootstrap.datatables.js" type="text/javascript"></script>
    <script src="~/Scripts/datatables.setFilteringDisplay.js" type="text/javascript"></script>
    <script src="~/Scripts/jquery.hotkeys.js" type="text/javascript"></script>
    <script type="text/javascript">
        $('#T_Results').dataTable({

        });

        // This guy applies a class to the
        $('a[data-type="url"]').on('focus', function (e) {
            $(this).parent().parent().addClass('highlighted');
        });

        $('a[data-type="url"]').on('blur', function (e) {
            $(this).parent().parent().removeClass('highlighted');
        });

        $(document).bind('keydown', 'esc', function () {
            $('input[type="search"]').focus();
        });
        $(document).bind('keydown', 'ctrl+space', function () {
            $('input[type="search"]').focus();
        });
        $(document).bind('keydown', 'up', function () {
        
        });
        $(document).bind('keydown', 'down', function () {
            
        });

    </script>
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-30310300-1']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>
</body>
</html>